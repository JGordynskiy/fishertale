[gd_scene load_steps=28 format=3 uid="uid://cth2l3adobs7"]

[ext_resource type="Texture2D" uid="uid://dovm6ow14bwds" path="res://Assets/enemies/lightfish/lightFishMain.png" id="1_8sjaw"]
[ext_resource type="Script" uid="uid://y6v7mq837sgq" path="res://scenes/entities/light_fish.gd" id="1_noduv"]
[ext_resource type="Texture2D" uid="uid://by8uaycfr4n0i" path="res://Assets/enemies/lightfish/lightFishidle1.png" id="2_fkode"]
[ext_resource type="Texture2D" uid="uid://d3620b8ve4rce" path="res://Assets/enemies/lightfish/lightFishDead.png" id="3_2x2ff"]
[ext_resource type="Texture2D" uid="uid://bjo3cypo56sb2" path="res://Assets/enemies/lightfish/lightFishidle2.png" id="3_fn3a5"]
[ext_resource type="Texture2D" uid="uid://c6uc1gt66qrlr" path="res://Assets/enemies/lightfish/lightFishIdle3.png" id="4_jyhme"]
[ext_resource type="Texture2D" uid="uid://c8cfdr2s20rs3" path="res://Assets/enemies/lightfish/lightFishSpawning1.png" id="5_jyhme"]
[ext_resource type="Texture2D" uid="uid://dark5kfs6c0nx" path="res://Assets/enemies/lightfish/LightFishSpawning2.png" id="6_noduv"]
[ext_resource type="Texture2D" uid="uid://cuy75bae04stp" path="res://Assets/enemies/lightfish/LightFishSpawning3.png" id="7_pxgsf"]
[ext_resource type="Texture2D" uid="uid://bb5fnm8xr1nk6" path="res://Assets/particles/sparkle.png" id="9_pxgsf"]
[ext_resource type="AudioStream" uid="uid://n21w0321fjle" path="res://Assets/sounds/enemie/lightFish/lightfishSpawn.ogg" id="10_xp3fx"]
[ext_resource type="AudioStream" uid="uid://cro5mrjvjfg35" path="res://Assets/sounds/enemie/lightFish/lightfishDespawn.ogg" id="11_w8n2r"]
[ext_resource type="AudioStream" uid="uid://b4uqqxpwhqrnv" path="res://Assets/sounds/enemie/lightFish/lightfishDmg.ogg" id="12_17nqx"]
[ext_resource type="Texture2D" uid="uid://c1whd0g47ia0x" path="res://Assets/objects/light.webp" id="13_q5pi1"]
[ext_resource type="AudioStream" uid="uid://clu6b08u16h5v" path="res://Assets/sounds/enemie/lightFish/lightFishDeath.ogg" id="15_63r4s"]

[sub_resource type="SpriteFrames" id="SpriteFrames_noduv"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_2x2ff")
}],
"loop": true,
"name": &"dead",
"speed": 5.0
}, {
"frames": [{
"duration": 25.0,
"texture": ExtResource("1_8sjaw")
}, {
"duration": 1.0,
"texture": ExtResource("2_fkode")
}, {
"duration": 1.0,
"texture": ExtResource("3_fn3a5")
}, {
"duration": 1.0,
"texture": ExtResource("4_jyhme")
}, {
"duration": 2.0,
"texture": ExtResource("3_fn3a5")
}, {
"duration": 2.0,
"texture": ExtResource("2_fkode")
}],
"loop": true,
"name": &"idle",
"speed": 30.0
}, {
"frames": [{
"duration": 4.0,
"texture": ExtResource("5_jyhme")
}, {
"duration": 1.0,
"texture": ExtResource("6_noduv")
}, {
"duration": 1.0,
"texture": ExtResource("7_pxgsf")
}, {
"duration": 1.0,
"texture": ExtResource("1_8sjaw")
}],
"loop": false,
"name": &"spawnIn",
"speed": 15.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("1_8sjaw")
}, {
"duration": 1.0,
"texture": ExtResource("7_pxgsf")
}, {
"duration": 1.0,
"texture": ExtResource("6_noduv")
}, {
"duration": 1.0,
"texture": ExtResource("5_jyhme")
}],
"loop": false,
"name": &"spawnOut",
"speed": 15.0
}]

[sub_resource type="Animation" id="Animation_xp3fx"]
length = 0.001
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:scale:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(4.3251023, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:scale:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(4.3251023, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}

[sub_resource type="Animation" id="Animation_pxgsf"]
resource_name = "spawnIn"
length = 0.5
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:scale:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(2, 2),
"points": PackedFloat32Array(0.01, 0, 0, 0, 1.6460149, 4.3251023, -0.3213898, -0.083432674, 0, 0),
"times": PackedFloat32Array(0, 0.5)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:scale:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(2, 2),
"points": PackedFloat32Array(0.01, 0, 0, 0, 1.4111598, 4.3251023, -0.3333333, 0.13751602, 0, 0),
"times": PackedFloat32Array(0, 0.5)
}

[sub_resource type="Animation" id="Animation_w8n2r"]
resource_name = "spawnOut"
length = 0.1
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:scale:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(4.325, -0.25, 0, 0.033333335, -0.28321755, 0.09384817, -0.033333324, 0.2812082, 0, 0),
"times": PackedFloat32Array(0, 0.099999994)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:scale:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(4.325, -0.25, 0, 0.03576045, -0.41377848, -0.0065833554, 0, 0.18077672, 0, 0),
"times": PackedFloat32Array(0, 0.1)
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_w8n2r"]
_data = {
&"RESET": SubResource("Animation_xp3fx"),
&"spawnIn": SubResource("Animation_pxgsf"),
&"spawnOut": SubResource("Animation_w8n2r")
}

[sub_resource type="Curve" id="Curve_obonb"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_xp3fx"]
curve = SubResource("Curve_obonb")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_17nqx"]
lifetime_randomness = 1.0
particle_flag_disable_z = true
spread = 180.0
initial_velocity_max = 15000.0
gravity = Vector3(0, 0, 0)
scale_min = 0.099999994
scale_max = 0.5
scale_curve = SubResource("CurveTexture_xp3fx")

[sub_resource type="Curve" id="Curve_2x2ff"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.7257143, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_63r4s"]
curve = SubResource("Curve_2x2ff")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_iro4x"]
particle_flag_disable_z = true
spread = 180.0
initial_velocity_min = 2000.0
initial_velocity_max = 15000.0
gravity = Vector3(0, 98, 0)
scale_min = 0.39999998
scale_max = 0.79999995
scale_curve = SubResource("CurveTexture_63r4s")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_63r4s"]
particle_flag_disable_z = true
emission_shape = 6
emission_ring_axis = Vector3(0, 0, 1)
emission_ring_height = 1.0
emission_ring_radius = 1000.0
emission_ring_inner_radius = 1000.0
emission_ring_cone_angle = 90.0
gravity = Vector3(0, 98, 0)
radial_accel_min = -4000.0
radial_accel_max = -4000.0
scale_min = 0.19999999
scale_max = 0.19999999

[node name="lightFish" type="Node2D" groups=["dangerObj", "objects"]]
z_index = 300
script = ExtResource("1_noduv")

[node name="PointLight2D" type="PointLight2D" parent="."]
scale = Vector2(5.7791204, 5.7791204)
color = Color(1, 0.9583334, 0.75, 1)
shadow_enabled = true
texture = ExtResource("13_q5pi1")
texture_scale = 33.33
height = 1024.0

[node name="sprite" type="AnimatedSprite2D" parent="."]
position = Vector2(7, -32)
scale = Vector2(4.3251023, 4.3251023)
sprite_frames = SubResource("SpriteFrames_noduv")
animation = &"idle"
frame_progress = 0.6208709

[node name="AnimationPlayer" type="AnimationPlayer" parent="sprite"]
libraries = {
&"": SubResource("AnimationLibrary_w8n2r")
}
speed_scale = 0.8

[node name="spawn" type="GPUParticles2D" parent="."]
scale = Vector2(0.990881, 1)
emitting = false
amount = 150
texture = ExtResource("9_pxgsf")
lifetime = 2.0
one_shot = true
explosiveness = 1.0
randomness = 0.5
visibility_rect = Rect2(-99999, -999999, 999999, 9999999)
process_material = SubResource("ParticleProcessMaterial_17nqx")

[node name="SFX" type="Node2D" parent="."]

[node name="spawnSFX" type="AudioStreamPlayer2D" parent="SFX"]
stream = ExtResource("10_xp3fx")
volume_db = 8.0
max_distance = 20000.0
attenuation = 0.9012504
bus = &"SFX"

[node name="despawnSFX" type="AudioStreamPlayer2D" parent="SFX"]
stream = ExtResource("11_w8n2r")
volume_db = 5.0
max_distance = 20000.0
attenuation = 0.9

[node name="dmgSFX" type="AudioStreamPlayer2D" parent="SFX"]
stream = ExtResource("12_17nqx")
volume_db = 12.0
max_distance = 20000.0
attenuation = 0.9

[node name="hitbox" type="Area2D" parent="." groups=["dangerObj", "enemyHitbox", "objects"]]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="hitbox"]
polygon = PackedVector2Array(-1274, 1529, -1599, 586, -2412, -671, -2834, -1538, -2520, -1570, -2195, -1158, -1003, -671, -516, -1213, -61, -1451, 459, -1288, 1196, -638, 2063, -920, 2475, -1516, 2821, -1321, 2171, -400, 1164, 1290, 1250, 2612, 622, 1529, 48, 2558, -732, 1691, -1220, 2666)
disabled = true

[node name="checker" type="Area2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="checker"]
polygon = PackedVector2Array(-1274, 1529, -1599, 586, -2412, -671, -2834, -1538, -2520, -1570, -2195, -1158, -1003, -671, -516, -1213, -61, -1451, 459, -1288, 1196, -638, 2063, -920, 2475, -1516, 2821, -1321, 2171, -400, 1164, 1290, 1250, 2612, 622, 1529, 48, 2558, -732, 1691, -1220, 2666)

[node name="deathPart" type="GPUParticles2D" parent="."]
emitting = false
amount = 800
texture = ExtResource("9_pxgsf")
lifetime = 4.0
one_shot = true
speed_scale = 2.0
explosiveness = 0.72
visibility_rect = Rect2(-99999, -99999, 99999, 99999)
process_material = SubResource("ParticleProcessMaterial_iro4x")

[node name="xtraLight" type="PointLight2D" parent="."]
scale = Vector2(55.93839, 55.93839)
color = Color(1, 0.95686275, 0.7490196, 1)
energy = 0.0
shadow_enabled = true
texture = ExtResource("13_q5pi1")
texture_scale = 1.15

[node name="chargePart" type="GPUParticles2D" parent="."]
scale = Vector2(9.679395, 9.679395)
emitting = false
amount = 150
texture = ExtResource("9_pxgsf")
lifetime = 2.1999999999999997
one_shot = true
speed_scale = 4.0
visibility_rect = Rect2(-99999, -99999, 99999, 99999)
process_material = SubResource("ParticleProcessMaterial_63r4s")

[node name="deathSFX" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("15_63r4s")
max_distance = 12000.0
bus = &"SFX"

[connection signal="area_entered" from="hitbox" to="." method="_on_hitbox_area_entered"]
